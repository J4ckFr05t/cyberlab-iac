---
- name: Join Linux hosts to domain
  hosts: linux, infra
  become: true
  vars_files:
    - ../inventory/group_vars/all.yml
    - ../inventory/group_vars/linux.yml
    - ../inventory/group_vars/secret_vault.yml
  roles:
    - ../roles/linux_join_domain

- name: Join Windows hosts to domain
  hosts: windows
  vars:
    ansible_user: "{{ win_username }}"
    ansible_password: "{{ win_password }}"
  vars_files:
    - ../inventory/group_vars/all.yml
    - ../inventory/group_vars/windows.yml
    - ../inventory/group_vars/secret_vault.yml
  roles:
    - ../roles/win_join_domain
